<!DOCTYPE html> 
<html>

<head>
    <meta charset="UTF-8">
    <title>Weather Outfit Recommender</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body>

    <div class="page-title">
        <h1>üå§Ô∏è Weather & Outfit Advice</h1>
        <p>‚ÄúStay stylish no matter what the forecast says.‚Äù</p>
    </div>

    <!-- Creating hour buttons -->
    <div class="hour-button">
        {% for i in range(combined|length) %}
            <button onclick="show_cards({{ i }})">
                {{ combined[i][1]['date'][8:10] }}/{{ combined[i][1]['date'][5:7] }} {{ combined[i][1]['time'][:5] + combined[i][1]['time'][8:10]}}
            </button>
        {% endfor %}
    </div>


    <!-- Creating weather cards for the whole day in a loop -->
{% for suggestion, value in combined %}
    <div class="weather-card-container-container">

        <div class="weather-card-container">

            <!-- Temperature Card -->
            <div class="weather-card temperature-card">
                <h3>Temperature</h3>
                <img src="https://img.icons8.com/ios/50/000000/thermometer.png" alt="Temperature">
                <h4 class="temperature-value" data-celsius="{{ value['temp'] | safe }}">{{ value["temp"]|safe }}¬∞C</h4>
                <p>{{ suggestion["temperature"]|safe }}</p>
            </div>

            <!-- Rain Card -->
            <div class="weather-card">
                <h3>Rain</h3>
                <img src="https://img.icons8.com/ios/50/000000/rain.png" alt="Rain">
                <h4>{{ value["rain"]|safe }}</h4>
                <p>{{ suggestion["rain"]|safe }}</p>
            </div>

            <!-- Humidity Card -->
            <div class="weather-card">
                <h3>Humidity</h3>
                <img src="https://img.icons8.com/ios/50/000000/water.png" alt="Humidity">
                <h4>{{ value["humidity"]|safe }}</h4>
                <p>{{ suggestion["humidity"]|safe }}</p>
            </div>

            <!-- Condition Card -->
            <div class="weather-card">
                <h3>Condition</h3>
                {% if value["condition"] == "Clear" %}
                    <img src="https://img.icons8.com/ios/50/000000/sun.png" alt="Clear">
                {% elif value["condition"] == "Clouds" %}
                    <img src="https://img.icons8.com/ios/50/000000/cloud.png" alt="Clouds">
                {% elif value["condition"] == "Rain" %}
                    <img src="https://img.icons8.com/ios/50/000000/rain.png" alt="Rain">
                {% else %}
                    <img src="https://img.icons8.com/ios/50/000000/cloud--v1.png" alt="Other">
                {% endif %}
                <h4>{{ value["condition"]|safe }}</h4>
                <p>{{ suggestion["condition"]|safe }}</p>
            </div>

            <!-- Advice Card -->
            <div class="weather-card">
                <h3>Advice</h3>
                <img src="https://img.icons8.com/ios/50/000000/light-on.png" alt="Advice">
                <p>{{ suggestion["advice"]|safe }}</p>
            </div>

        </div>

    </div>
{% endfor %}

    <!-- Creating buttons for unit toggling -->
    <div class="unit-button">
        <button onclick="change_unit('C', this)">
                ¬∞C
        </button>
        <button onclick="change_unit('F', this)">
                ¬∞F
        </button>
    </div>


    <!-- Script for the hour buttons to show the cards for that specific time when clicked -->
    <script>
        function show_cards(index) {
            const blocks = document.querySelectorAll('.weather-card-container-container');
            for (let i = 0; i < blocks.length; i++) {
                if (i === index) {
                    blocks[i].style.display = 'block';
                } else {
                    blocks[i].style.display = 'none';
                }
            }

            const buttons = document.querySelectorAll('.hour-button button')
            for (let i = 0; i < buttons.length; i++) {
                if (i === index) {
                    buttons[i].classList.add('active');
                } else {
                    buttons[i].classList.remove('active');
                }
            }
        }
    </script>


    <!-- Script for the unit buttons to show the values in that unit on the cards -->
    <script>
        function change_unit(unit, clickedBtn) {
            const tempelements = document.querySelectorAll(".temperature-value");
            for (let i = 0; i < tempelements.length; i++) {
                const element = tempelements[i];
                const celsius = parseFloat(element.dataset.celsius);
                if (unit === "C") {
                    element.textContent = `${celsius}¬∞C`;
                } else {
                    const fahrenheit = Math.round((celsius * 9/5) + 32);
                    element.textContent = `${fahrenheit}¬∞F`;
                }
            }

            const buttons = document.querySelectorAll(".unit-button button");
            for (let i = 0; i < buttons.length; i++) {
                buttons[i].classList.remove("active");
            }
            clickedBtn.classList.add("active");
        }
    </script>

</body>

</html>
